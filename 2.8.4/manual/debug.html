<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title> How to debug an OCaml program compiled to JavaScript.</title><meta charset="utf8"/><link rel="stylesheet" href="/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script src="/client.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js"></script></head><body><h1> How to debug an OCaml program compiled to JavaScript.</h1><h2> Use the right compiler flags</h2><h3> OCaml flags</h3><p>Make sure to use &quot;-g&quot; flags when compiling and linking ocaml bytecode.
</p><h3> Js_of_ocaml flags</h3><ul><li> [–pretty]    - format the generated JavaScript in a readable way and try to keep OCaml variable names.
</li><li> [–no-inline]  - prevent function inlining.
</li><li> [–debug-info] - annotate the JavaScript file with locations from the OCaml sources.
</li><li> [–source-map] - enable source-map support
</li></ul><h2> Breakpoint</h2><p>One can set breakpoints using developers tools (see <a href="https://developer.chrome.com/devtools/docs/javascript-debugging)" class="ocsimore_phrasing_link">https://developer.chrome.com/devtools/docs/javascript-debugging)</a>.
Alternatively, one can set breakpoints programmatically by calling <span class="teletype">Js.debugger ()</span>. Note that
browsers will only stop at breakpoints when developers tools are in use.
</p><h2> Source map</h2><p>Source map is used to map the generated JavaScript code to original sources.
After compiling with sourcemap enabled, using developers tools, one can set breakpoints,
step through the code, and inspect variable directly in OCaml sources.
</p><h2> About Chrome DevTools</h2><p>Useful setting Chrome DevTools:
</p><ul><li> Display variable values inline while debugging
</li><li> Resolve variable names (hiddden DevTools Experiments, see <a href="http://islegend.com/development/how-to-enable-devtools-experiments-within-google-chrome)" class="ocsimore_phrasing_link">http://islegend.com/development/how-to-enable-devtools-experiments-within-google-chrome)</a>
</li></ul></body></html>
