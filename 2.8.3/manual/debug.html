<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title> How to debug an OCaml program compiled to JavaScript.</title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js"></script><script src="/js/client.js"></script></head><body class="js_of_ocaml 2.8.3"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href="/" class="ocsimore_phrasing_link"><img src="/img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Js_of_ocaml
</p><ul class="mainmenu"><li class="mainmenu-home"><a href="/" class="ocsimore_phrasing_link">Home</a>
</li><li class="mainmenu-doc"><a href="/tuto/6.2/manual/intro" class="ocsimore_phrasing_link">Doc</a>
</li><li><a href="/eliom/6.3/manual/intro" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="mainmenu-current"><a href="/js_of_ocaml/3.1.0/manual/overview" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li><a href="/lwt/3.2.1/manual/manual" class="ocsimore_phrasing_link">Lwt</a>
</li><li><a href="/tyxml/4.1.0/manual/intro" class="ocsimore_phrasing_link">Tyxml</a>
</li><li><a href="/ocsigen-start/1.1.0/manual/intro" class="ocsimore_phrasing_link">Start</a>
</li></ul><div class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href="/" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href="/tuto/6.2/manual/intro" class="ocsimore_phrasing_link">Doc</a>
</li><li><a href="/eliom/6.3/manual/intro" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-current"><a href="/js_of_ocaml/3.1.0/manual/overview" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li><a href="/ocsigenserver/2.9/manual/quickstart" class="ocsimore_phrasing_link">Server</a>
</li><li><a href="/lwt/3.2.1/manual/manual" class="ocsimore_phrasing_link">Lwt</a>
</li><li><a href="/tyxml/4.1.0/manual/intro" class="ocsimore_phrasing_link">Tyxml</a>
</li><li><a href="/ocsigen-toolkit/1.1.0/manual/intro" class="ocsimore_phrasing_link">Toolkit</a>
</li><li><a href="/ocsigen-start/1.1.0/manual/intro" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-page"><a href="/projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href="/papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href="/credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href="/blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><div class="how-doctree"><h1>Js_of_ocaml</h1><h2><a href="/js_of_ocaml/2.8.3/manual/overview" class="ocsimore_phrasing_link">Overview</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/library" class="ocsimore_phrasing_link">Library overview</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/bindings" class="ocsimore_phrasing_link">Binding a JS library</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/export" class="ocsimore_phrasing_link">Export OCaml code to JavaScript</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/core_async_kernel" class="ocsimore_phrasing_link">Core_kernel and Async_kernel</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/linker" class="ocsimore_phrasing_link">Link javascript code</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/options" class="ocsimore_phrasing_link">Command line options</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/performances" class="ocsimore_phrasing_link">Performances</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/debug" class="ocsimore_phrasing_link">Debug with js_of_ocaml</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/tailcall" class="ocsimore_phrasing_link">About tailcall optimization</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/camlp4" class="ocsimore_phrasing_link">Camlp4 syntax extension</a></h2><h2>Examples</h2><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/toplevel/index.html" class="ocsforge_doclink_js_of_ocaml">An OCaml toplevel running in the browser</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/planet/index.html" class="ocsforge_doclink_js_of_ocaml">An animated 3D view of the Earth</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/graph_viewer/index.html" class="ocsforge_doclink_js_of_ocaml">A graph viewer</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/boulderdash/index.html" class="ocsforge_doclink_js_of_ocaml">A Boulder Dash game</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/wiki/index.html" class="ocsforge_doclink_js_of_ocaml">A realtime wiki editor</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/webgl/index.html" class="ocsforge_doclink_js_of_ocaml">A webgl demo</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/minesweeper/index.html" class="ocsforge_doclink_js_of_ocaml">A Minesweeper game</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/hyperbolic/index.html" class="ocsforge_doclink_js_of_ocaml">A hyperbolic tree viewer</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/cubes/index.html" class="ocsforge_doclink_js_of_ocaml">A random walk on lozenge tiling configurations</a></span></h3></div></nav></div></div><button id="reason">Switch to </button><div class="twocols"><div class="leftcol"><div class="how-versions"><input id="how-versions-toggle" type="checkbox"/><label for="how-versions-toggle" class="how-versions-current">Version 2.8.3</label><div class="how-versions-all"><a href="/js_of_ocaml/dev/manual/debug">dev</a><a href="/js_of_ocaml/3.1.0/manual/debug">3.1.0</a><a href="/js_of_ocaml/2.8.4/manual/debug">2.8.4</a><span class="how-versions-all-current">2.8.3</span><a href="/js_of_ocaml/2.8.2/manual/debug">2.8.2</a><a href="/js_of_ocaml/2.8.1/manual/debug">2.8.1</a><a href="/js_of_ocaml/2.8/manual/debug">2.8</a><a href="/js_of_ocaml/2.7/manual/debug">2.7</a><a href="/js_of_ocaml/2.6/manual/debug">2.6</a><a href="/js_of_ocaml/2.5/manual/debug">2.5</a><a href="/js_of_ocaml/2.4.1/manual/debug">2.4.1</a><a href="/js_of_ocaml/2.4/manual/debug">2.4</a><a href="/js_of_ocaml/2.3/manual/debug">2.3</a><a href="/js_of_ocaml/2.2/manual/debug">2.2</a><a href="/js_of_ocaml/2.1/manual/debug">2.1</a><a href="/js_of_ocaml/2.0/manual/debug">2.0</a><a href="/js_of_ocaml/1.4/manual/debug">1.4</a><a href="/js_of_ocaml/1.3/manual/debug">1.3</a><a href="/js_of_ocaml/1.2/manual/debug">1.2</a><a href="/js_of_ocaml/1.1.1/manual/debug">1.1.1</a><a href="/js_of_ocaml/1.0.9/manual/debug">1.0.9</a></div></div><form id="search"><input name="q" id="q" placeholder="search ..."/><button>Search</button></form><div class="how-doctree"><h1>Js_of_ocaml</h1><h2><a href="/js_of_ocaml/2.8.3/manual/overview" class="ocsimore_phrasing_link">Overview</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/library" class="ocsimore_phrasing_link">Library overview</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/bindings" class="ocsimore_phrasing_link">Binding a JS library</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/export" class="ocsimore_phrasing_link">Export OCaml code to JavaScript</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/core_async_kernel" class="ocsimore_phrasing_link">Core_kernel and Async_kernel</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/linker" class="ocsimore_phrasing_link">Link javascript code</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/options" class="ocsimore_phrasing_link">Command line options</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/performances" class="ocsimore_phrasing_link">Performances</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/debug" class="ocsimore_phrasing_link">Debug with js_of_ocaml</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/tailcall" class="ocsimore_phrasing_link">About tailcall optimization</a></h2><h2><a href="/js_of_ocaml/2.8.3/manual/camlp4" class="ocsimore_phrasing_link">Camlp4 syntax extension</a></h2><h2>Examples</h2><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/toplevel/index.html" class="ocsforge_doclink_js_of_ocaml">An OCaml toplevel running in the browser</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/planet/index.html" class="ocsforge_doclink_js_of_ocaml">An animated 3D view of the Earth</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/graph_viewer/index.html" class="ocsforge_doclink_js_of_ocaml">A graph viewer</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/boulderdash/index.html" class="ocsforge_doclink_js_of_ocaml">A Boulder Dash game</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/wiki/index.html" class="ocsforge_doclink_js_of_ocaml">A realtime wiki editor</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/webgl/index.html" class="ocsforge_doclink_js_of_ocaml">A webgl demo</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/minesweeper/index.html" class="ocsforge_doclink_js_of_ocaml">A Minesweeper game</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/hyperbolic/index.html" class="ocsforge_doclink_js_of_ocaml">A hyperbolic tree viewer</a></span></h3><h3><span><a href="/js_of_ocaml/2.8.3/manual/files/cubes/index.html" class="ocsforge_doclink_js_of_ocaml">A random walk on lozenge tiling configurations</a></span></h3></div></div><div class="rightcol"><h1> How to debug an OCaml program compiled to JavaScript.</h1><h2> Use the right compiler flags</h2><h3> OCaml flags</h3><p>Make sure to use &quot;-g&quot; flags when compiling and linking ocaml bytecode.
</p><h3> Js_of_ocaml flags</h3><ul><li> [–pretty]    - format the generated JavaScript in a readable way and try to keep OCaml variable names.
</li><li> [–no-inline]  - prevent function inlining.
</li><li> [–debug-info] - annotate the JavaScript file with locations from the OCaml sources.
</li><li> [–source-map] - enable source-map support
</li></ul><h2> Breakpoint</h2><p>One can set breakpoints using developers tools (see <a href="https://developer.chrome.com/devtools/docs/javascript-debugging)" class="ocsimore_phrasing_link">https://developer.chrome.com/devtools/docs/javascript-debugging)</a>.
Alternatively, one can set breakpoints programmatically by calling <span class="teletype">Js.debugger ()</span>. Note that
browsers will only stop at breakpoints when developers tools are in use.
</p><h2> Source map</h2><p>Source map is used to map the generated JavaScript code to original sources.
After compiling with sourcemap enabled, using developers tools, one can set breakpoints,
step through the code, and inspect variable directly in OCaml sources.
</p><h2> About Chrome DevTools</h2><p>Useful setting Chrome DevTools:
</p><ul><li> Display variable values inline while debugging
</li><li> Resolve variable names (hiddden DevTools Experiments, see <a href="http://islegend.com/development/how-to-enable-devtools-experiments-within-google-chrome)" class="ocsimore_phrasing_link">http://islegend.com/development/how-to-enable-devtools-experiments-within-google-chrome)</a>
</li></ul></div></div></div></body></html>
